"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[830],{6760:(t,e,r)=>{r.d(e,{Z:()=>o});var s=r(1519),a=r.n(s)()((function(t){return t[1]}));a.push([t.id,".form-check-input-payment[data-v-df14a188]{cursor:pointer;display:block!important;height:15px;width:15px}.input-checkbox label[data-v-df14a188]{align-items:center;border:1px solid #eee;border-radius:4px;cursor:pointer;height:60px;padding:6px;width:100%}.card-list ul li label img[data-v-df14a188]{height:40px;width:200px!important}.selected-border[data-v-df14a188]{border:2px solid var(--menu-bg-color)!important}",""]);const o=a},2162:(t,e,r)=>{r.d(e,{Z:()=>o});var s=r(1519),a=r.n(s)()((function(t){return t[1]}));a.push([t.id,"",""]);const o=a},6830:(t,e,r)=>{r.r(e),r.d(e,{default:()=>c});var s=r(5593),a=r(4721);const o={name:"checkout",components:{addressForm:s.Z,payment_details:a.Z},data:function(){return{loading:!1,payment_form:{total:0,payment_type:null,name:null,personal_number:null,phone_no:null,address:null,city_id:null,product_ids:[]},trx_id:"",product_names:[],addressErrors:{},paymentMethods:[{value:"1",label:"Pay with BOG",imageUrl:this.getUrl("public/images/payment-method/bog_geo_vertical.png"),altText:"BOG"},{value:"3",label:"Pay with Installment",imageUrl:this.getUrl("public/images/payment-method/bog_geo_vertical.png"),altText:"Installment"},{value:"4",label:"Pay with TBCC",imageUrl:this.getUrl("public/images/payment-method/tbcc.svg"),altText:"TBCC"},{value:"2",label:"Pay with Credo",imageUrl:this.getUrl("public/images/payment-method/credo.jpeg"),altText:"Credo"}]}},computed:{carts:function(){return this.$store.getters.getCarts}},watch:{carts:function(t){this.parseData(t),console.log("Updated Carts:",t)}},mounted:function(){this.getCarts()},methods:{getCarts:function(){var t=this,e=this.getUrl("user/address?cart_page="+this.$route.query.cart_page);this.$Progress.start(),axios.get(e,{params:this.$route.params.type}).then((function(e){e.data.error?(t.$Progress.fail(),toastr.error(e.data.error,t.lang.Error+" !!")):(t.$store.commit("setLoginRedirection",""),t.parseData(e.data.carts,e.data.checkouts,e.data.coupons),console.log("Fetched Carts Data:",e.data.carts),t.$Progress.finish())})).catch((function(e){t.$Progress.fail(),console.error("Failed to fetch carts:",e)}))},parseData:function(t){this.resetForm();for(var e=[],r=0,s=[],a=0;a<t.length;a++)this.payment_form.quantity.push({id:t[a].id,quantity:t[a].quantity}),r+=parseFloat(t[a].price*t[a].quantity),this.trx_id=t[a].trx_id,e.push({name:t[a].product_name,quantity:t[a].quantity}),s.push(t[a].id);this.payment_form.product_ids=s,console.log("Product IDs:",this.payment_form.product_ids),this.payment_form.total=r,this.product_names=e,this.payment_form.trx_id=this.trx_id,console.log("Parsed Payment Form:",this.payment_form)},confirmOrder:function(){var t=this,e=this.getUrl("order/validate");this.loading=!0,this.$Progress.start(),console.log("Payment Form Data before API Call:",this.payment_form),axios.post(e,this.payment_form).then((function(e){if(t.loading=!1,t.$Progress.finish(),e.data.error)toastr.error(e.data.error,t.lang.Error+" !!");else{toastr.success(e.data.success,t.lang.Success+" !!"),console.log(e.data);var r=e.data.redirect_url;r?window.location.href=r:toastr.error(t.lang.something_went_wrong,t.lang.Error+" !!")}})).catch((function(e){t.loading=!1,t.$Progress.fail(),e.response&&422===e.response.status?(t.addressErrors=e.response.data.errors||{},toastr.error(t.lang.form_validation_error,t.lang.Error+" !!")):e.response?toastr.error(e.response.data.message||t.lang.something_went_wrong,t.lang.Error+" !!"):toastr.error(t.lang.something_went_wrong,t.lang.Error+" !!")}))},handlePaymentRedirect:function(){var t=this.payment_form.payment_type;(1===t||3===t)&&(window.location.href=this.getUrl(""))},receiveAddressData:function(t){this.payment_form.name=t.name,this.payment_form.personal_number=t.personal_number,this.payment_form.phone_no=t.phone_no,this.payment_form.address=t.address,this.payment_form.city_id=t.city_id},resetForm:function(){this.payment_form={total:0,payment_type:null,name:null,personal_number:null,phone_no:null,address:null,city_id:null,product_ids:[],quantity:[]},this.product_names=[]}}};var n=r(3379),i=r.n(n),l=r(6760),d={insert:"head",singleton:!1};i()(l.Z,d);l.Z.locals;const c=(0,r(1900).Z)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"sg-page-content"},[e("div",{staticClass:"sg-breadcrumb"},[e("div",{staticClass:"container"},[e("ol",{staticClass:"breadcrumb justify-content-center"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{attrs:{to:{name:"cart"}}},[t._v(t._s(t.lang.view_cart))])],1),t._v(" "),e("li",{staticClass:"breadcrumb-item"},[t._v(t._s(t.lang.check_out))]),t._v(" "),e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.lang.confirm_order))])])])])]),t._v(" "),e("section",{staticClass:"shopping-cart"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-8"},[e("div",{staticClass:"sg-shipping"},[e("div",{staticClass:"title"},[e("h1",[t._v(t._s(t.lang.choose_a_way_to_collect_order))])]),t._v(" "),e("address-form",{attrs:{addressErrors:t.addressErrors},on:{"address-updated":t.receiveAddressData}})],1)]),t._v(" "),e("div",{staticClass:"col-lg-4 pl-lg-5"},[e("div",{staticClass:"order-summary"},[e("h6",[t._v(t._s(t.lang.price_details))]),t._v(" "),e("payment_details",{attrs:{products:t.product_names,total:t.payment_form.total}}),t._v(" "),e("div",{staticClass:"sg-shipping"},[e("div",{staticClass:"title"},[e("h1",[t._v(t._s(t.lang.payment_method))])]),t._v(" "),e("div",{staticClass:"card-list"},[e("ul",{staticClass:"global-list"},t._l(t.paymentMethods,(function(r,s){return e("li",{key:s,staticClass:"w-100 d-block"},[e("div",{staticClass:"input-checkbox d-flex justify-content-between align-items-center"},[e("label",{staticClass:"d-flex align-items-center mb-0 justify-content-around payment-label",class:{"selected-border":t.payment_form.payment_type===r.value},attrs:{for:r.value}},[e("img",{staticClass:"img-fluid me-2",attrs:{src:r.imageUrl,alt:r.altText,width:"90"}}),t._v("\n                        "+t._s(r.label)+"\n                        "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.payment_form.payment_type,expression:"payment_form.payment_type"}],staticClass:"form-check-input-payment ms-2",attrs:{type:"radio",id:r.value,name:"radio"},domProps:{value:r.value,checked:t._q(t.payment_form.payment_type,r.value)},on:{change:function(e){return t.$set(t.payment_form,"payment_type",r.value)}}})])])])})),0)])]),t._v(" "),t.loading?e("loading_button",{attrs:{class_name:"btn btn-primary"}}):e("a",{staticClass:"btn btn-primary mt-2",attrs:{href:"javascript:void(0)"},on:{click:t.confirmOrder}},[t._v(t._s(t.lang.proceed_to_payment))])],1)])])])])])}),[],!1,null,"df14a188",null).exports},5593:(t,e,r)=>{r.d(e,{Z:()=>l});var s=r(4443);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function n(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var s=r.call(t,e||"default");if("object"!==a(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const i={name:"addressForm",props:{addressErrors:{type:[Object,Array],default:function(){return{}}}},components:{telePhone:s.Z},data:function(){return{form:{name:"",personal_number:"",phone_no:"",address:"",city_id:""},cities:[]}},mounted:function(){this.getCities(),this.address_area_title=this.lang.address_area_title,this.address_submit_button=this.lang.address_submit_button},watch:{lang:function(){this.address_area_title=this.lang.address_area_title,this.address_submit_button=this.lang.address_submit_button}},computed:{},methods:{emitAddressData:function(){this.$emit("address-updated",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},this.form))},getNumber:function(t){this.form.phone_no=t,this.emitAddressData()},saveAddress:function(){var t=this;this.loading=!0;var e=this.getUrl("store/user-address");return axios.post(e,this.form).then((function(e){if(t.loading=!1,e.data.error)return toastr.error(e.data.error,t.lang.Error+" !!"),Promise.reject(e.data.error);var r=e.data.address;return console.log("Saved Address:",r),t.$emit("addressSaved",r),t.clearForm(),r})).catch((function(e){return t.loading=!1,422===e.response.status&&(t.errors=e.response.data.errors),Promise.reject(e)}))},clearForm:function(){this.form.id="",this.form.name="",this.form.phone_no="",this.form.address="",this.form.personal_number="",this.form.city_id=""},getCities:function(){var t=this,e=this.getUrl("city/by-state/1");axios.get(e).then((function(e){e.data.error?toastr.error(e.data.error,t.lang.Error+" !!"):t.cities=e.data.cities})).catch((function(e){toastr.error(e.message,t.lang.Error+" !!")}))}}};const l=(0,r(1900).Z)(i,(function(){var t=this,e=t._self._c;return e("div",{ref:"update",staticClass:"accordion add-new"},[e("div",{staticClass:"accordion-item"},[e("div",{staticClass:"accordion-header"}),t._v(" "),e("div",{staticClass:"accordion-collapse collapse show",attrs:{id:"shipping_accordion","aria-labelledby":"address1","data-bs-parent":"#accordionExample"}},[e("div",{staticClass:"accordion-body"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.saveAddress()}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.lang.name))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",class:{error_border:t.addressErrors.name},attrs:{type:"text",placeholder:t.lang.name},domProps:{value:t.form.name},on:{input:[function(e){e.target.composing||t.$set(t.form,"name",e.target.value)},t.emitAddressData]}})]),t._v(" "),t.addressErrors.name?e("span",{staticClass:"validation_error"},[t._v(t._s(t.addressErrors.name[0]))]):t._e()]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("label",[t._v(t._s(t.lang.phone))]),t._v(" "),e("telePhone",{attrs:{phone_error:t.addressErrors.phone_no?t.addressErrors.phone_no[0]:null},on:{phone_no:t.getNumber}}),t._v(" "),t.addressErrors.phone_no?e("span",{staticClass:"validation_error"},[t._v(t._s(t.addressErrors.phone_no[0]))]):t._e()],1),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.lang.personal_number))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.personal_number,expression:"form.personal_number"}],staticClass:"form-control",class:{error_border:t.addressErrors.personal_number},attrs:{type:"text",placeholder:t.lang.personal_number},domProps:{value:t.form.personal_number},on:{input:[function(e){e.target.composing||t.$set(t.form,"personal_number",e.target.value)},t.emitAddressData]}})]),t._v(" "),t.addressErrors.personal_number?e("span",{staticClass:"validation_error"},[t._v(t._s(t.addressErrors.personal_number[0]))]):t._e()]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.lang.city))]),t._v(" "),e("v-select",{class:{error_border:t.addressErrors.city_id},attrs:{dir:t.settings.text_direction,label:"name",options:t.cities,reduce:function(t){return t.id}},on:{input:t.emitAddressData},model:{value:t.form.city_id,callback:function(e){t.$set(t.form,"city_id",e)},expression:"form.city_id"}})],1),t._v(" "),t.addressErrors.city_id?e("span",{staticClass:"validation_error"},[t._v(t._s(t.addressErrors.city_id[0]))]):t._e()]),t._v(" "),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.lang.address))]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.address,expression:"form.address"}],staticClass:"form-control",class:{error_border:t.addressErrors.address},attrs:{placeholder:t.lang.street_address},domProps:{value:t.form.address},on:{input:[function(e){e.target.composing||t.$set(t.form,"address",e.target.value)},t.emitAddressData]}})])]),t._v(" "),t.addressErrors.address?e("span",{staticClass:"validation_error"},[t._v(t._s(t.addressErrors.address[0]))]):t._e()])])])])])])])}),[],!1,null,"251b6c74",null).exports},4721:(t,e,r)=>{r.d(e,{Z:()=>l});const s={name:"payment_details",props:["products","total"],computed:{}};var a=r(3379),o=r.n(a),n=r(2162),i={insert:"head",singleton:!1};o()(n.Z,i);n.Z.locals;const l=(0,r(1900).Z)(s,(function(){var t=this,e=t._self._c;return e("div",[e("ul",{staticClass:"global-list"},[t._l(t.products,(function(r,s){return e("li",{key:s},[t._v("\n      "+t._s(r.name)+" "),e("span",[t._v(t._s(r.quantity))])])})),t._v(" "),e("li",[t._v(" "+t._s(t.lang.delivery)),e("span",[t._v(" 1-2 დღე")])])],2),t._v(" "),e("div",{staticClass:"order-total"},[e("p",{staticClass:"font_weight_400"},[t._v(t._s(t.lang.total)+" "),e("span",[t._v(t._s(t.priceFormat(t.total)))])])])])}),[],!1,null,"cb2dc4fc",null).exports},4443:(t,e,r)=>{r.d(e,{Z:()=>a});const s={name:"telephone",props:{phone_error:"",disabled:Boolean},data:function(){return{dropdown_active:!1,search_key:"",selected_country:"",defaultCountry:{flag:"",code:"",name:""},activeClass:"hideShow",phone_no:"",count:1,filtered_countries:[],country_id:[]}},watch:{phone:function(){this.phone_no=this.phone}},mounted:function(){this.country(),this.country_id=this.settings.default_country},computed:{phone:function(){return this.$store.getters.getMobileNo},countries:function(){return this.$store.getters.getCountryList}},methods:{PlusCheck:function(t){return!!t&&t.phonecode.includes("+")},getCountryCode:function(t){this.activeClass="hideShow",this.phone_no="",this.count=1,this.defaultCountry.flag=t?t.flag_icon:this.getUrl("public/images/flags/bd.png");t?(this.country_id=t.id,t.phonecode.includes("+")?this.defaultCountry.code=t.phonecode:this.defaultCountry.code="+"+t.phonecode,this.defaultCountry.name=t.name):(this.defaultCountry.code="+880",this.defaultCountry.name="Bangladesh"),this.phone_no=this.defaultCountry.code},getNum:function(){this.$emit("phone_no",this.phone_no),this.count++},country:function(){var t=this,e=this.getUrl("get/country-list");if(this.countries.length>0){this.filtered_countries=this.countries;var r=this.countries.find((function(e){return e.id==t.settings.default_country}));this.getCountryCode(r)}else axios.get(e).then((function(e){if(e.data.error)toastr.error(e.data.error,t.lang.Error+" !!");else{t.$store.commit("setCountryList",e.data.countries),t.filtered_countries=e.data.countries;var r=t.countries.find((function(e){return e.id==t.settings.default_country}));t.getCountryCode(r)}}))}}};const a=(0,r(1900).Z)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"yoori__signup--form",class:{error_border:t.phone_error}},[e("div",{staticClass:"country__code--config"},[e("div",{staticClass:"country__code--config-details"},[e("span",{staticClass:"country__code--flag"},[e("img",{staticClass:"img-fluid",attrs:{src:t.defaultCountry.flag,alt:"Flag"}})])])]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.phone_no,expression:"phone_no"}],staticClass:"number",attrs:{type:"tel",disabled:t.disabled},domProps:{value:t.phone_no},on:{keyup:function(e){return t.$emit("phone_no",t.phone_no)},input:function(e){e.target.composing||(t.phone_no=e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.country_id,expression:"country_id"}],attrs:{type:"hidden"},domProps:{value:t.country_id},on:{input:function(e){e.target.composing||(t.country_id=e.target.value)}}})])}),[],!1,null,"612711bd",null).exports}}]);